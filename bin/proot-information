#!/bin/bash

# dependencies #

source /data/data/com.termux/files/usr/bin/console
source /data/data/com.termux/files/usr/bin/globals

# usage #

# variables #

script=$(basename -- "${BASH_SOURCE[0]}")

# get user information

console.fwd "The following information is required to set up your environment."
echo

console.warning "The information will be used to set up the user account."
console.warning "The fields cannot be empty."
echo

# values #

values_list=(
	first_name
	last_name
	user_email
)

# FIX ME #

# manage user input for values_list

# console.input ${values_list[@]}

for value in "${values_list[@]}"
do
	label=${value^}
	prompt="$(echo ${label} | sed 's/_/ /'): "
	
	console.in "${prompt}"
	read input
	
	# prevent empty input
	
	while true
		do
			if [ -z "$input" ]
			then
				echo
				console.error "${label} cannot be empty:"
				console.warning "${label} ${message}"
				echo
			
				console.in "${prompt}"
				read input
	
			else
				break
			fi
		done
	
	eval "$value"="$input"
done

# export variables

cat << FILE >> "$BINARIES_DIRECTORY"/globals

# user information #

export first_name=${first_name}
export last_name=${last_name}
export full_name="$first_name $last_name"
export user_name=${first_name,,}
export user_email=${user_email}

FILE