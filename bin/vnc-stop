#!/bin/bash

# dependencies #

source /data/data/com.termux/files/usr/bin/console
source /data/data/com.termux/files/usr/bin/globals

vnc_server () {
	vncserver > /dev/null 2>&1
}

clean () {
	if [ -e "/tmp/.X*" ]
	then
		rm -rf "/tmp/.X*"
	fi
}

# check for process tokens and cleanup

if pgrep -f vnc > /dev/null
then
	console.fwd "Stopping display server..."
	echo

	vnc_server \
		-kill \
		-clean \
				${DISPLAY}

	clean
fi
